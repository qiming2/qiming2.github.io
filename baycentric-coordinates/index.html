<!DOCTYPE html>
<html lang="en,zh-CN,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"8.0.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":10,"offset":15},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

  <meta name="description" content="$\newcommand{\Vc}[3]{\begin{bmatrix}#1 \\ #2 \\ #3 \\end{bmatrix} }$ $\newcommand{\Frac}[2]{  #1 \over #2}$ Baycentric CoordinatesIn OpenGL, vertex usually has many attributes like normal vector, uv c">
<meta property="og:type" content="article">
<meta property="og:title" content="Baycentric Coordinates">
<meta property="og:url" content="http://example.com/baycentric-coordinates/index.html">
<meta property="og:site_name" content="Ktou">
<meta property="og:description" content="$\newcommand{\Vc}[3]{\begin{bmatrix}#1 \\ #2 \\ #3 \\end{bmatrix} }$ $\newcommand{\Frac}[2]{  #1 \over #2}$ Baycentric CoordinatesIn OpenGL, vertex usually has many attributes like normal vector, uv c">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/baycentric-coordinates/triangle_intersection.png">
<meta property="article:published_time" content="2020-11-23T23:43:36.000Z">
<meta property="article:modified_time" content="2020-11-24T01:44:59.407Z">
<meta property="article:author" content="Qiming Guan">
<meta property="article:tag" content="OpenGL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/baycentric-coordinates/triangle_intersection.png">


<link rel="canonical" href="http://example.com/baycentric-coordinates/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Baycentric Coordinates | Ktou</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Ktou</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Rest A Bit</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">4</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/" rel="section"><i class="fa fa-archives fa-fw"></i>Archives<span class="badge">5</span></a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Baycentric-Coordinates"><span class="nav-number">1.</span> <span class="nav-text">Baycentric Coordinates</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Code-Example"><span class="nav-number">1.1.</span> <span class="nav-text">Code Example:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">2.</span> <span class="nav-text">Reference:</span></a></li></ol></div>
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Qiming Guan"
      src="/images/mydrawing.png">
  <p class="site-author-name" itemprop="name">Qiming Guan</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/qiming2" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qiming2" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/baycentric-coordinates/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mydrawing.png">
      <meta itemprop="name" content="Qiming Guan">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ktou">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Baycentric Coordinates
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-11-23 15:43:36 / Modified: 17:44:59" itemprop="dateCreated datePublished" datetime="2020-11-23T15:43:36-08:00">2020-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Graphics/" itemprop="url" rel="index"><span itemprop="name">Graphics</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>$\newcommand{\Vc}[3]{\begin{bmatrix}<br>#1 \\ #2 \\ #3 \<br>\end{bmatrix} }$</p>
<p>$\newcommand{\Frac}[2]{<br>  #1 \over #2<br>}$</p>
<h1 id="Baycentric-Coordinates"><a href="#Baycentric-Coordinates" class="headerlink" title="Baycentric Coordinates"></a>Baycentric Coordinates</h1><p>In OpenGL, vertex usually has many attributes like normal vector, uv coordinates, position vector and even color value, and also models are almost always drawn from a bunch of triangles that define each small piece of surface on those models. However, we can only set values to those vertices of each triangles but not those vertices that lie inside the triangles. How do find those values? This is where baycentric coordinates come into play.</p>
<p>Baycentric coordinates essentially helps us to interpolate the value, like normal vector, uv coordinate, of a point that lies inside a triangle with vertex ABC.</p>
<p><img src="/baycentric-coordinates/triangle_intersection.png"></p>
<p>According to the picture if Q lies inside the triangle, position Q can always be expressed as some proportions of each position vector of each vertex ABC:</p>
<p>\begin{equation}<br>  Q = {\alpha}A + {\beta}B + {\gamma}C \label{eq1}<br>\end{equation}</p>
<p>$(\alpha, \beta, \gamma)$ are the baycentric coordinates we are looking for. The baycentric coordinates are proportional to the area of the subtriangles formed by each side with point Q like the following:</p>
<p>\begin{equation}<br>  \alpha = {\Frac{AreaQBC}{AreaABC}}\label{eq2}<br>\end{equation}</p>
<p>\begin{equation}<br>  \beta = {\Frac{AreaQAC}{AreaABC}}\label{eq3}<br>\end{equation}</p>
<p>\begin{equation}<br>  \gamma = {\Frac{AreaQAB}{AreaABC}}\label{eq4}<br>\end{equation}</p>
<p>To calculate the baycentric coordinates we need to calculate the areas of all the subtriangles as well as area of the triangle ABC. And this is pretty easy because of normal vector! Remember that half of the magnitude of a normal vector for one triangle is the area of that triangle:</p>
<p>\begin{equation}<br>  AreaABC = {||(B - A) \times (C - A)|| \over 2} \label{eq5}<br>\end{equation}</p>
<p>Thus we can apply the same strategy to those three subtriangles (we can get rid of division since they will be canceled anyways):</p>
<p>\begin{equation}<br>  \alpha = {\Frac{||(C - B) \times (Q - B)||}{||(B - A) \times (C - A)||}}\label{eq6}<br>\end{equation}</p>
<p>\begin{equation}<br>  \beta = {\Frac{||(A - C) \times (Q - C)||}{||(B - A) \times (C - A)||}}\label{eq7}<br>\end{equation}</p>
<p>\begin{equation}<br>  \gamma = {\Frac{||(B - A) \times (Q - A)||}{||(B - A) \times (C - A)||}}\label{eq8}<br>\end{equation}</p>
<p>Once we have our baycentric coordinates, we can easily calculate unit normal vector:</p>
<p>\begin{equation}<br>  N_Q = {\alpha N_A + \beta N_B + \gamma N_C \over ||\alpha N_A + \beta N_B + \gamma N_C||}\label{eq9}<br>\end{equation}</p>
<p>The uv coordinate can also be computed similarly, but we don’t normalize them; otherwise, you would get strange effect unless that is exactly what you want ^ ^!</p>
<p>\begin{equation}<br>  UV_Q = \alpha UV_A + \beta UV_B + \gamma UV_C \label{eq10}<br>\end{equation}</p>
<h2 id="Code-Example"><a href="#Code-Example" class="headerlink" title="Code Example:"></a>Code Example:</h2><figure class="highlight c++"><figcaption><span>Triangle::Baycentric</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TriangleFace::Baycentric</span><span class="params">(Vertex &amp;Q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  struct Vertex &#123;</span></span><br><span class="line"><span class="comment">    glm::dvec3 p; // position</span></span><br><span class="line"><span class="comment">    glm::dvec3 n; // normal vector (normalized)</span></span><br><span class="line"><span class="comment">    glm::dvec2 uv; // uv coordinate</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  glm is math library that resembles glsl shader language.</span></span><br><span class="line"><span class="comment">  a, b, c are position vectors (glm::dvec3) for vertex ABC</span></span><br><span class="line"><span class="comment">  a_n, b_n, c_n are normal vectors (glm::dvec3 and normalized) for vertex ABC</span></span><br><span class="line"><span class="comment">  a_uv, b_uv, c_uv are uv vectors (glm::dvec2) for vertex ABC</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Get the barycentric coordinate constants</span></span><br><span class="line">   <span class="keyword">double</span> alpha = glm::length(glm::cross(c - b, Q.p - b)) / glm::length(glm::cross(b - a, c - a));</span><br><span class="line">   <span class="keyword">double</span> beta = glm::length(glm::cross(a - c, Q.p - c)) / glm::length(glm::cross(b - a, c - a));</span><br><span class="line">   <span class="keyword">double</span> gamma = glm::length(glm::cross(b - a, Q.p - a)) / glm::length(glm::cross(b - a, c - a));</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Calculate the normal at point Q</span></span><br><span class="line"></span><br><span class="line">   Q.normal = glm::normalize((alpha * a_n) + (beta * b_n) + (gamma * c_n));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">// Calculate the uv coordinates at point Q</span></span><br><span class="line">   glm::vec2 weighted_a_uv = &#123;a_uv.x * alpha, a_uv.y * alpha&#125;;</span><br><span class="line">   glm::vec2 weighted_b_uv = &#123;b_uv.x * beta, b_uv.y * beta&#125;;</span><br><span class="line">   glm::vec2 weighted_c_uv = &#123;c_uv.x * gamma, c_uv.y * gamma&#125;;</span><br><span class="line">   Q.uv = weighted_a_uv + weighted_b_uv + weighted_c_uv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h1><ul>
<li>Fundamentals Of Computer Graphics - Peter Shirley, Steve Marschner</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/OpenGL/" rel="tag"># OpenGL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/triangle-intersection/" rel="prev" title="Triangle Intersection">
                  <i class="fa fa-chevron-left"></i> Triangle Intersection
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Move-Semantics/" rel="next" title="Move Semantics">
                  Move Semantics <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qiming Guan</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div><script color="0,0,255" opacity="0.7" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>


    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


















  








  

  
      <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = '//cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
